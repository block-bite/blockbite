(()=>{"use strict";var e={n:t=>{var l=t&&t.__esModule?()=>t.default:()=>t;return e.d(l,{a:l}),l},d:(t,l)=>{for(var n in l)e.o(l,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:l[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.wp.blocks,l=window.React,n=window.wp.components,a=window.wp.i18n,i=window.wp.blockEditor,o=window.wp.element,c=window.wp.apiFetch;var r=e.n(c);const s=({isOpen:e,children:t,onClose:n})=>{const a=e?"show":"hide";return(0,l.createElement)("div",{className:`blockbite--modal ${a} `},(0,l.createElement)("div",{className:"blockbite--modal__content"},(0,l.createElement)("button",{className:"blockbite--modal__close",onClick:()=>{n(!1)}},(0,l.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},(0,l.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})),(0,l.createElement)("span",null," close")),(0,l.createElement)("div",{className:"blockbite--modal__scrollable"},t)),(0,l.createElement)("div",{className:"blockbite--modal__overlay"}))};function u(e){const[t,a]=(0,o.useState)(!1),[i,c]=(0,o.useState)([{icon_url:"",icons:[]}]),[u,k]=(0,o.useState)("");return(0,o.useEffect)((()=>{r()({path:"/blockbite/v1/get-icons/"}).then((e=>{c({...e})}))}),[]),(0,o.useEffect)((()=>{r()({path:"/blockbite/v1/pick-icon/"+u}).then((t=>{(t=>{void 0!==t&&e.parentCallback(t)})(t),a(!1)}))}),[u]),(0,l.createElement)(l.Fragment,null,(0,l.createElement)("h2",null,"Pick Icon"),(0,l.createElement)(s,{isOpen:t,onClose:e=>a(!1)},(0,l.createElement)("p",null,"List of Svg found in blocktheme/resources/svg.."),(0,l.createElement)("div",{className:"blockbite--editor-icon-grid"},(0,l.createElement)(m,{icons:i,onActiveIcon:e=>k(e)}))),(0,l.createElement)(n.Button,{variant:"secondary",onClick:()=>a(!0)},"Open Icons"))}function m({icons:e,onActiveIcon:t}){const n=[];return void 0===e.icons?(0,l.createElement)("p",null,"loading..."):(e.icons.forEach((a=>{n.push((0,l.createElement)("div",{key:a},(0,l.createElement)("img",{className:"blockbite--editor-icon",width:"64px",height:"64px",src:`${e.icon_url}/${a}.svg`,onClick:()=>t(a)})))})),n)}function k(e){const[t,i]=(0,o.useState)(""),[c,s]=(0,o.useState)(null),[u,m]=(0,o.useState)({url:"",title:""});return(0,o.useEffect)((()=>{""!==t&&(s(null),r()({path:`/blockbite/v1/get-links/${t}`}).then((e=>{e.length?s([...e]):s([])})))}),[t]),(0,o.useEffect)((()=>{""!==u.url&&e.parentCallback(u)}),[u]),(0,l.createElement)(l.Fragment,null,(0,l.createElement)("div",{className:"blockbite--editor-linkwrap"},(0,l.createElement)(n.TextControl,{label:(0,a.__)("Search link","blockbitelinks"),value:t,placeholder:"Example: About",onChange:e=>i(e),help:(0,a.__)("Type a post, page, title","blockbitelinks")}),t?(0,l.createElement)("div",{className:"blockbite--editor-linklist"},(0,l.createElement)(b,{links:c,onActiveLink:e=>[m({...e}),i("")]})):null))}function b({links:e,onActiveLink:t}){const n=[];return null===e?(0,l.createElement)("p",null,"Loading..."):0===e.length?(0,l.createElement)("p",null,"No Results"):(e.forEach((e=>{n.push((0,l.createElement)("div",{key:e.id},(0,l.createElement)("span",{className:"blockbite--editor-link",onClick:()=>t(e)},(0,l.createElement)("span",null,e.title),(0,l.createElement)("span",{className:"blockbite--preview-link"},e.url),(0,l.createElement)("span",{className:"blockbite--preview-link"},e.post_type))))})),n)}function p({linkUrl:e,linkTitle:t,linkTarget:i,linkTile:c,showLinkTile:r,parentCallback:s}){const[u,m]=(0,o.useState)(!1),[b,p]=(0,o.useState)(""),[d,E]=(0,o.useState)(""),[g,h]=(0,o.useState)(""),[v,w]=(0,o.useState)(!1),[C,f]=(0,o.useState)(!1);(0,o.useEffect)((()=>{"_blank"===i&&(console.log("from link panel",t,e),w(!0)),c&&f(!0),e&&p(e),t&&E(t)}),[]),(0,o.useEffect)((()=>{let e={..._()};s(e)}),[d,b]);const _=()=>{const e={};return d&&(e.linkTitle=d),b&&(e.linkUrl=b),g&&(e.linkTarget=g),r&&(e.linkTile=c),e};return(0,l.createElement)(l.Fragment,null,(0,l.createElement)(n.PanelRow,null,u?(0,l.createElement)("span",{style:{color:"red"}},u):(0,l.createElement)("div",null,(0,l.createElement)("span",null,d),(0,l.createElement)("br",null),(0,l.createElement)("span",null,b))),(0,l.createElement)(n.PanelRow,null,(0,l.createElement)("fieldset",null,(0,l.createElement)(k,{parentCallback:e=>{const t={..._()};t.linkTitle=e.title,t.linkUrl=e.url,E(e.title),p(e.url),s(t)}}),(0,l.createElement)(n.TextControl,{label:(0,a.__)("Titel","blockbite-icon"),value:d,onChange:e=>E(e),help:(0,a.__)("Change your button title...","blockbite-icon")}),(0,l.createElement)(n.TextControl,{label:(0,a.__)("Url","blockbite-icon"),value:b,onChange:e=>p(e),help:(0,a.__)("Change your button url...","blockbite-icon")}),(0,l.createElement)(n.Button,{variant:"secondary",onClick:()=>{const e={..._()};e.linkTitle="",e.linkUrl="",p(""),E(""),s(e)}},"Clear link"))),(0,l.createElement)(n.PanelRow,null,(0,l.createElement)(n.ToggleControl,{label:"Open in tab",help:v?"Open in tab":"Within site",checked:v,onChange:e=>(e=>{const t=e?"_blank":"_self";w(e),setLinkProps("linkTarget",t)})(e)})),r&&(0,l.createElement)(n.PanelRow,null,(0,l.createElement)(n.ToggleControl,{label:"Link as Tile",help:C?"Make the whole area clickable":"Make only the button clickable",checked:C,onChange:e=>(e=>{f(e),setLinkProps("linkTile",e)})(e)})))}window.wp.url;const d=JSON.parse('{"u2":"blockbite/icon"}');function E(){return E=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n])}return e},E.apply(this,arguments)}(0,t.registerBlockType)(d.u2,{example:{attributes:{message:"Section"}},icon:e=>l.createElement("svg",E({width:e.width||"1em",height:e.height||"1em",viewBox:"0 0 50 50",fill:"none",xmlns:"http://www.w3.org/2000/svg",role:"img"},e),l.createElement("rect",{width:50,height:50,fill:"currentColor"}),l.createElement("path",{d:"M34.816 23.194C35.1018 24.6551 35.0474 26.1624 34.657 27.5991C34.2667 29.0358 33.5508 30.3634 32.565 31.479C30.5 33.789 27.828 34 25 34C22.172 34 19.491 33.789 17.432 31.479C16.4471 30.3629 15.7321 29.0352 15.3422 27.5985C14.9524 26.1619 14.8983 24.6549 15.184 23.194C16.5278 22.891 17.9293 22.9663 19.2329 23.4115C20.5365 23.8567 21.6912 24.6544 22.569 25.716C23.8094 27.1086 24.6495 28.8113 25 30.643C25.3463 28.8113 26.1842 27.1082 27.424 25.716C28.3034 24.6544 29.4594 23.8569 30.7641 23.4118C32.0687 22.9667 33.4711 22.8913 34.816 23.194ZM25 16C23.0385 17.3839 21.6928 19.477 21.248 21.836C22.3072 22.4079 23.2593 23.159 24.062 24.056C24.3984 24.4319 24.7117 24.828 25 25.242C25.2874 24.8275 25.6 24.4311 25.936 24.055C26.7405 23.1567 27.6947 22.4046 28.756 21.832C28.31 19.4735 26.9628 17.3816 25 16Z",fill:"#F5F5F5"})),edit:function({attributes:e,setAttributes:t}){const{svgCode:o,svgSize:c,linkUrl:r,linkTitle:s,linkTarget:m}=e,k=e=>{t({svgCode:e})},b=(0,i.useBlockProps)({className:`wp-element-icon svg-size-${c}`});return(0,l.createElement)("div",{...b},(0,l.createElement)("span",{dangerouslySetInnerHTML:{__html:o}}),(0,l.createElement)(i.InspectorControls,null,(0,l.createElement)(n.PanelBody,{title:(0,a.__)("Svg Settings","blockbite-icon"),initialOpen:!0},(0,l.createElement)(n.PanelRow,null,(0,l.createElement)(u,{parentCallback:e=>{k(e)}})),(0,l.createElement)(n.PanelRow,null,(0,l.createElement)("fieldset",null,(0,l.createElement)(n.TextControl,{label:(0,a.__)("Svg Code","blockbite-icon"),value:o,onChange:k,help:(0,a.__)("Add your Svg Code, make sure it starts with <svg ...","blockbite-icon")}))),(0,l.createElement)(n.PanelRow,null,(0,l.createElement)(n.RangeControl,{label:"Svg Size",value:c,withInputField:!1,onChange:e=>{t({svgSize:e})},min:1,max:10}))),(0,l.createElement)(n.PanelBody,{title:"Link",initialOpen:!1},(0,l.createElement)(p,{parentCallback:e=>{t({...e})},linkUrl:r,linkTitle:s,linkTarget:m,showLinkTile:!1}))))},save:function({attributes:e}){const{svgCode:t,svgSize:n,linkTarget:a,linkUrl:o,linkTitle:c}=e,r=i.useBlockProps.save({className:`wp-element-icon svg-size-${n}`});return(0,l.createElement)("div",{...r},(0,l.createElement)("span",{dangerouslySetInnerHTML:{__html:t}}),o?(0,l.createElement)("a",{rel:"noopener noreferrer",target:a,href:o,title:c,className:"tile"}):null)}})})();